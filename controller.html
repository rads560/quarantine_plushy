<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Raspberry Pi LED Controller">
        <link href='http://fonts.googleapis.com/css?family=Lato:300,400,400italic' rel='stylesheet' type='text/css'>
        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script src="http://cdn.pubnub.com/pubnub-3.7.1.min.js"></script>
        <style>
        </style>
    
    </head>
    <body>
        <div>
            <center>
                <h3>Raspberry Pi LED Controller</h3>
                <button id='toy'>Thinking of you!</button>
                <p id='desc'>Radhika's bear is glowing pink :)</p>
            </center>
        </div>
        <script type="text/javascript">
            
            var pubnub = PUBNUB.init({
                publish_key: 'pub-c-63771edf-cfc7-4d18-b066-24b1e7f0e40c',
                subscribe_key: 'sub-c-d6f1853a-38ed-11eb-99ef-fa1b309c1f97'
            });

            var description = document.getElementById('desc');
            description.style.display = 'none';
            
            pubnub.subscribe({
                channel: 'raspberry-control',
                message: function(m){
                    console.log(m)
                    var msg = String(m)
                    if(msg == 'lit') {
                        description.style.display = 'block';
                    }
                    if(msg == 'off') {
                        description.style.display = 'none';
                    }
                }
            });
            
            $( document ).ready(function() {
                
                $('#toy').click(function(e){
                    
                    pubmsg = 'pink';
                    
                    pubnub.publish(
                        { 
                            channel : 'raspberry-control' ,
                            message :  pubmsg
                        }
                    );
                });
            });
        </script>
    </body>
</html>
